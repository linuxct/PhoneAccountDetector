<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <meta name="generator" content="VuePress 2.0.0-beta.27">
    <link rel="icon" href="/images/favicon.png"><title>PhoneAccount Abuse Detector</title><meta name="description" content="Simple application to enumerate and detect any application that (ab)uses adding an indefinite amount of PhoneAccount(s) to Android's Telecom Manager">
    <link rel="preload" href="/assets/js/runtime~app.feadb22a.js" as="script"><link rel="preload" href="/assets/css/styles.527321ed.css" as="style"><link rel="preload" href="/assets/js/812.fa08af80.js" as="script"><link rel="preload" href="/assets/js/app.5b45695f.js" as="script">
    <link rel="stylesheet" href="/assets/css/styles.527321ed.css">
  </head>
  <body>
    <div id="app"><!--[--><div class="theme-container"><!--[--><header ref_key="navbar" class="navbar"><div class="toggle-sidebar-button" title="toggle sidebar" aria-expanded="false" role="button" tabindex="0"><div class="icon" aria-hidden="true"><span></span><span></span><span></span></div></div><span><a href="/" class=""><!----><span class="site-name can-hide">PhoneAccount Abuse Detector</span></a></span><div class="navbar-links-wrapper" style=""><!--[--><!--]--><nav class="navbar-links can-hide"><!--[--><div class="navbar-links-item"><a href="/guide/guide" class="nav-link" aria-label="Guide"><!--[--><!--]--> Guide <!--[--><!--]--></a></div><div class="navbar-links-item"><a class="nav-link external" href="https://github.com/linuxct/PhoneAccountDetector" rel="noopener noreferrer" target="_blank" aria-label="GitHub"><!--[--><!--]--> GitHub <span><svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><!--[--><span class="sr-only">open in new window</span><!--]--></span><!--[--><!--]--></a></div><!--]--></nav><!--[--><!--]--><!----><!----></div></header><!--]--><div class="sidebar-mask"></div><!--[--><aside class="sidebar"><nav class="navbar-links"><!--[--><div class="navbar-links-item"><a href="/guide/guide" class="nav-link" aria-label="Guide"><!--[--><!--]--> Guide <!--[--><!--]--></a></div><div class="navbar-links-item"><a class="nav-link external" href="https://github.com/linuxct/PhoneAccountDetector" rel="noopener noreferrer" target="_blank" aria-label="GitHub"><!--[--><!--]--> GitHub <span><svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><!--[--><span class="sr-only">open in new window</span><!--]--></span><!--[--><!--]--></a></div><!--]--></nav><!--[--><!--]--><ul class="sidebar-links"><!--[--><!--[--><p class="sidebar-heading sidebar-item"></p><ul class=""><li><!--[--><a aria-current="page" href="/guide/#background" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="Background"><!--[--><!--]--> Background <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/guide/#about-permissions" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="About permissions"><!--[--><!--]--> About permissions <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/guide/#application-usage" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="Application usage"><!--[--><!--]--> Application usage <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/guide/#screenshots" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="Screenshots"><!--[--><!--]--> Screenshots <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/guide/#building-the-app" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="Building the app"><!--[--><!--]--> Building the app <!--[--><!--]--></a><!----><!--]--></li></ul><!--]--><!--]--></ul><!--[--><!--]--></aside><!--]--><!--[--><main class="page"><!--[--><!--]--><div class="theme-default-content"><!--[--><h2 id="background" tabindex="-1"><a class="header-anchor" href="#background" aria-hidden="true">#</a> Background</h2><p>This application exists because malicious or just improperly programmed applications can, intentionally or not, block your device from the ability to call emergency numbers. If you are in such a situation, this app helps you to find the culprit â€“ which you then can uninstall (or disable).</p><p>For the exact details on the vulnerability (why this happens, how it was discovered, fixes timeline, ...), please check the article by Mishaal Rahman <a href="https://medium.com/@mmrahman123/how-a-bug-in-android-and-microsoft-teams-could-have-caused-this-users-911-call-to-fail-6525f9ba5e63" target="_blank" rel="noopener noreferrer">here<span><svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><!--[--><span class="sr-only">open in new window</span><!--]--></span></a>.</p><h2 id="about-permissions" tabindex="-1"><a class="header-anchor" href="#about-permissions" aria-hidden="true">#</a> About permissions</h2><p>This application requires two call management permissions:</p><ul><li><a href="https://developer.android.com/reference/android/Manifest.permission#READ_PHONE_STATE" target="_blank" rel="noopener noreferrer">Manifest.permission.READ_PHONE_STATE<span><svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><!--[--><span class="sr-only">open in new window</span><!--]--></span></a></li><li><a href="https://developer.android.com/reference/android/Manifest.permission#READ_PHONE_NUMBERS" target="_blank" rel="noopener noreferrer">Manifest.permission.READ_PHONE_NUMBERS<span><svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><!--[--><span class="sr-only">open in new window</span><!--]--></span></a>.</li></ul><p>This is because on Android, in order to read which applications are adding PhoneAccounts to Android&#39;s TelecomManager, these permissions are necessary.</p><p>Permission <code>READ_PHONE_STATE</code> is used in all supported Android versions, whereas <code>READ_PHONE_NUMBERS</code> is requested on Android 12 and onwards exclusively.</p><p>No permission is (ab)used to log, collect or process any personally identifiable user information.</p><h2 id="application-usage" tabindex="-1"><a class="header-anchor" href="#application-usage" aria-hidden="true">#</a> Application usage</h2><p>The application is very simple, and contains 2 components:</p><ul><li>A message at the top of the device, explaining if the application detected a possible abuse of this functionality which may cause issues while attempting to call Emergency Services.</li><li>A list of the applications that have registered a Phone Account in your device, usually including your own SIM Cards, Google Duo, Teams, among others. Alongside each app, the number of accounts is displayed to facilitate the identification of the malfunctioning/hijacking application.</li></ul><p>Check this video if you have doubts on how to interpret this data:</p><p align="center"><iframe width="560" height="315" src="https://www.youtube-nocookie.com/embed/MT9Xs01Zwa0" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen>
  </iframe></p><blockquote><p>(Thanks to <a href="https://www.youtube.com/c/AndroidExplainedTips" target="_blank" rel="noopener noreferrer">Explaining Android<span><svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><!--[--><span class="sr-only">open in new window</span><!--]--></span></a> for the video)</p></blockquote><h2 id="screenshots" tabindex="-1"><a class="header-anchor" href="#screenshots" aria-hidden="true">#</a> Screenshots</h2><h4 id="permissions-necessary-for-the-app-to-work" tabindex="-1"><a class="header-anchor" href="#permissions-necessary-for-the-app-to-work" aria-hidden="true">#</a> Permissions necessary for the app to work:</h4><p align="center" width="100%"><img width="30%" src="https://i.imgur.com/gDhJHeb.png" alt="Permission management"></p><h4 id="case-where-teams-added-4-phoneaccounts-to-telecommanager" tabindex="-1"><a class="header-anchor" href="#case-where-teams-added-4-phoneaccounts-to-telecommanager" aria-hidden="true">#</a> Case where Teams added 4 PhoneAccounts to TelecomManager:</h4><p align="center" width="100%"><img width="30%" src="https://i.imgur.com/I4zSf8R.png" alt="Abnormal case"><br></p><blockquote><p>The app flags this as abnormal behaviour</p></blockquote><h4 id="case-without-any-abnormal-app-behaviour" tabindex="-1"><a class="header-anchor" href="#case-without-any-abnormal-app-behaviour" aria-hidden="true">#</a> Case without any abnormal app behaviour&quot;</h4><p align="center" width="100%"><img width="30%" src="https://i.imgur.com/tsKHKTT.png" alt="Normal case"><br></p><h2 id="building-the-app" tabindex="-1"><a class="header-anchor" href="#building-the-app" aria-hidden="true">#</a> Building the app</h2><p>You can use Android Studio to build the application, or you can build it by using the CLI.</p><p>Navigate to the folder where the source code is located:<br><code>cd /path/where/you/downloaded/PhoneAccountDetector/</code></p><p>Then, check that Gradle runs properly by executing:<br> For Linux/MacOS: <code>./gradlew tasks</code><br> For Windows: <code>gradlew tasks</code></p><p>You can now build the application in release or debug flavor:<br><code>./gradlew assemble</code></p><p>After it&#39;s done building, you will now need to sign the resulting APK by using apksigner, or jarsigner. Here&#39;s an example:<br><code>apksigner sign --ks /path/to/example.keystore --ks-pass pass:&quot;EXAMPLEPASSWORD&quot; --v1-signing-enabled true --v2-signing-enabled true --verity-enabled true *.apk</code></p><!--]--></div><footer class="page-meta"><div class="meta-item edit-link"><a class="nav-link external meta-item-label" href="https://github.com/linuxct/PhoneAccountDetector/edit/main/guide/README.md" rel="noopener noreferrer" target="_blank" aria-label="Edit this page"><!--[--><!--]--> Edit this page <span><svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><!--[--><span class="sr-only">open in new window</span><!--]--></span><!--[--><!--]--></a></div><div class="meta-item last-updated"><span class="meta-item-label">Last Updated: </span><span class="meta-item-info">12/20/2021, 11:24:15 AM</span></div><div class="meta-item contributors"><span class="meta-item-label">Contributors: </span><span class="meta-item-info"><!--[--><!--[--><span class="contributor" title="email: hello@lucasmarino.me">Lucas Maximiliano Marino</span><!--[-->, <!--]--><!--]--><!--[--><span class="contributor" title="email: linuxct@linuxct.space">linuxct</span><!----><!--]--><!--]--></span></div></footer><!----><!--[--><!--]--></main><!--]--></div><!----><!--]--></div>
    <script src="/assets/js/runtime~app.feadb22a.js" defer></script><script src="/assets/js/812.fa08af80.js" defer></script><script src="/assets/js/app.5b45695f.js" defer></script>
  </body>
</html>
